Mondrian 3.1.5.13307 production release notes
=============================================

Introduction
------------

Mondrian 3.1.5.13307 is a minor release version of the leading
open-source OLAP engine. To find out more about mondrian, go
to http://mondrian.pentaho.org.

Contents
--------

As usual, there are two distributions for this release:
 * mondrian-<version>.zip contains the FoodMart dataset in
   SQL and Access format
 * mondrian-<version>-derby.zip contains the FoodMart
   dataset as an Apache Derby database

Each distribution contains the full mondrian source code, as
mondrian-<version>-src.zip, documentation including
generated API documentation, and a web archive mondrian.war.
This web archive contains all classes and libraries (jars)
necessary to run mondrian.

This release runs on Java version 1.5 and higher. For
backwards compatibility on Java 1.4, substitute
mondrian-jdk14.jar for mondrian.jar, and add
retroweaver-rt-1.2.4.jar to your classpath.

For further installation instructions, see
http://mondrian.pentaho.org/documentation/installation.php
or the included file doc/installation.html.

Main functionality in this release
----------------------------------

 - Tuple Aggregate Support
 - Database Dialecting Architecture. Database dialects are
   now pluggable, which means that they can be added to the
   classpath and Mondrian will use the most appropriate one.
 - Infobright Dialect Support
 - General performance improvements (SQL generation and
   sorting algorithms)
 - Allow SSAS2005-compatible syntax for resolving names
   of dimensions, hierarchies, levels, members, and in
   particular multiple hierarchies in a dimension. Since
   this is a minor release, we wish to avoid breaking
   changes, so this functionality is off by default. To
   enable, set mondrian.olap.SsasCompatibleNaming=true.
 - Netezza Dialect (3.1.1)
 - Various Workbench changes (3.1.1) 
 - Implemented compound slicer; that is, a WHERE clause that
   contains a set of members or tuples. logged MONDRIAN-555
   to record missing functionality. (3.1.2)
 - Upgraded license from CPL to EPL (3.1.2)
 - Implemented scenarios (writeback) (3.1.2)
 - Implemented HSQLDB dialect (3.1.3)
 - Implemented Vertica dialect (3.1.4)
 - Workbench Japanese translation contribution (3.1.4)
 - Workbench Calculated Member Properties support (3.1.4)
 - Implemented the Mod(n, d) arithmetic function (3.1.5)
 - Implemented 'AS' operator (to declare named sets inline) (3.1.5)
 - Implemented HP Neoview dialect (3.1.5)
 - Added caption and description to major schema elements (3.1.5)
 - Added annotations, user-defined properties against metadata
   elements (3.1.5)
 - Added DISPLAY_FOLDER as a member property (3.1.5)
 - Added plugin mondrian.spi.DataSourceResolver (3.1.5)

API changes from 3.0 to 3.1
---------------------------
 - High cardinality related array to list changes
 - Database dialect changes
 - AxisOrdinal changes. mondrian.olap.AxisOrdinal used to
   be an enum, is now an interface. Code that explicitly
   depends on this class will need to be recompiled.
 - Upgrade to olap4-0.9.7.145
 - Upgraded to olap4j-0.9.7.232 (3.1.2)
 - Upgraded to olap4j-0.9.7.296 (3.1.5)


See CHANGES.txt for a list of all source code changes
since the previous release.

Bugs and feature requests fixed since mondrian 3.1.5.13307
----------------------------------------------------------
MONDRIAN-295 - Query generated by Excel 2007 gives incorrect results
MONDRIAN-434 - Small negative numbers cause exceptions w
               2-section format
MONDRIAN-496 - Intermittent ArrayIndexOutOfBoundsException
MONDRIAN-612 - Drillthrough query with axis count != 2 gives 
               error via XMLA
MONDRIAN-615 - VisualTotals doesn't work for the all member
MONDRIAN-618 - Suspect that "ORDER BY ... NULLS LAST" fails 
               on PostgreSQL 8.2 and earlier
MONDRIAN-620 - Format strings which omit the "Nil" format 
               can cause an array out of bounds exception"
MONDRIAN-622 - Poor performance with large union role
MONDRIAN-628 - ClassCastException in Mondrian for query using
               Sales Ragged cube
MONDRIAN-632 - Add support for exposing descriptions on 
               Dimensions, Hierarchies, Levels, Members (Measures) 
               and Calculated Members
MONDRIAN-637 - Using Except in the slicer makes no sense
MONDRIAN-638 - Stack trace when grand total turned on
MONDRIAN-652 - Add support for generic annotations to Mondrian schema
MONDRIAN-654 - Non-standard driver implementations of
               ResultSetMetaData.getColumnName may break Mondrian
MONDRIAN-655 - Mondrian ignores level caption in schema
MONDRIAN-557 - ConcurrentModificationException when multiple threads 
               try and create Mondrian connections
MONDRIAN-663 - Improve metadata query (TupleReader) support for 
               aggregation tables to include dimensions defining more 
               than one column
MONDRIAN-667 - Unable to read annotations on VirtualCubeMeasures
MONDRIAN-668 - Intersect should return any VisualTotals members in 
               right-hand set

PSW-67 - Error while instantiating dialect when connecting to db2


Bugs and feature requests fixed since mondrian 3.1.4-13047
----------------------------------------------------------
MONDRIAN-621 - JPivot sort throws java.lang.NoSuchMethodError: 
		mondrian.olap.Query.safeClone()Lmondrian/olap/Query
MONDRIAN-618 - (interim fix) 
MONDRIAN-608 - Performance issue with large number of measures
PSW-60 - Working directory must be set for Schema Workbench to work
PSW-11 - Workbench: Add CalculatedMemberProperties
BISERVER-3294 - Japanese translation contribution
CM-88 - Standardize Java path and JAVA_HOME usage across all Pentaho scripts
CM-102 - All BI Suite startup scripts are inconsistent in how they invoke Java

Bugs and feature requests fixed since mondrian 3.1.3-13015
----------------------------------------------------------

MONDRIAN-605 - hsqldb 1.8 fails when using top count, order 
               by NULLS FIRST, LAST SQL syntax not supported

Bugs and feature requests fixed since mondrian-3.1.1-12687
----------------------------------------------------------

MONDRIAN-444 - Mondrian doesn't support WHERE clause with 
               set of tuples
MONDRIAN-562 - Aggregate tables don't work in Vertica
MONDRIAN-565 - If two cubes have dimension with same name, 
               mondrian treats grant to one as grant to other
MONDRIAN-571 - HighCardSqlTupleReader does not close SQL 
               Connections
MONDRIAN-576 - Upgrade retroweaver to version 2.0.7
MONDRIAN-577 - Reduce method-level synchronization in 
               mondrian/rolap/agg/Segment.java
MONDRIAN-585 - Concurrent usage can cause VFS socket 
               exceptions when reading schema via HTTP.
MONDRIAN-588 - UDF returning List works under 2.4, fails 
               under 3.1.1
MONDRIAN-589 - UDF expecting List gets anonymous 
               mondrian.rolap.RolapNamedSetEvaluator$1 
               instead
MONDRIAN-587 - testCrossjoinWithOneDimensionThatDoesNotJoinToBothBaseCubes 
               fails on Oracle/JDK1.5
MONDRIAN-598 - Format improvement to log entry in 
               "makePropertyFormatter" - space missing
PSW-55 - Update PSW product icon

Bugs and feature requests fixed since mondrian-3.1.0-12477-RC1
--------------------------------------------------------------

Bugs:
MONDRIAN-7   - Heterogeneous axis gives wrong results
MONDRIAN-473 - Performance bug in RolapEvaluator.setContext (partial fix)
MONDRIAN-519 - ClassCastException: parent/child and no closure
MONDRIAN-524 - VB functions: expected primitive type, got java.lang.Object
MONDRIAN-528 - MySQL database identified as INFOBRIGHT
MONDRIAN-539 - Problem with the MID function getting last character in a string.
MONDRIAN-540 - Netezza is an UNKNOWN Dialect
MONDRIAN-550 - Performance bug with NON EMPTY and large axes

Bugs and feature requests fixed since mondrian-3.0.3
----------------------------------------------------

Bugs:
1971406 - perf regression from change for large dimensions
1998598 - Non empty function doesn't work for high
          cardinality
2046318 - olap4j driver should throw OlapException on
          validate error
2062790 - Inline tables do not work on Microsoft SQL Server
2118478 - periodstodate w/level ought not require dim of
          type
 time
2141337 - Roles and virtual cubes
2150537 - error deducing type of Ytd/Qtd/Mtd functions
          within Generate
2186217 - NPE for dimension with Join (patch attached)
2141503 - Strange SQL condition appears when executing query
2189467 - ParallelPeriod applied to Levels or StrToMember
          gives NPE
2026930 - MondrianOlap4jMember.getCaption() throws exception
2279539 - mondrian.xsd line 69 MemeberGrant -> MemberGrant
2414144 - Incorrect getting parent member in parent-child
          hierarchy
2489311 - BitKey.compareTo is inefficient
2488492 - Union between calc mem and head function throws
          exception
1961163 - NON EMPTY and Filter() breaking aggregate
          calculations
2527862 - Failed to get Hierarchy list for particular
          dimension
2384825 - ClassCastException when obtaining RolapCubeLevel
2207515 - Aggregates incorrect with grouping sets
2106108 - Schema Workbench setAllTables assumes
          {"TABLE","VIEW"} 
2561069 - Schema workbench JDBC Explorer does not work with
          Oracle
 10g
2613265 - readVirtualFile() can return the incorrect file
2645300 - Move Infobright dialect from EE to CE
2666196 - Performance degradation with change 11049
2684180 - mondrian.rolap.SqlTupleReader Swallows Exceptions
2688790 - Hierarchy Naming Compatibility issue
2138156 - Workbench Publish name issue
2138161 - Workbench Dimension selection issue
2153098 - Mondrian exceptions when clicking on Dimension
          in Workbench
2153653 - Database preferences not enforced when modified
          in Workbench
2208219 - Workbench fails if the Mondrian schema has a
          <view> <sql> element
2208312 - Mouse right click doesn�t work on MAC OS X or
          Linux

Feature Requests:
1579663 - Read tuples from aggregate tables
2155850 - Workbench Database Schema Option

Pentaho Related Bugs (found at jira.pentaho.com):

BISERVER-2379 - Workbench- The MDX Query window fails when
          connected to SQL server 2000
BISERVER-2491 - Mondrian: rollupPolicy=partial and queries
          to upper members don't work
BISERVER-2786 - Schema Workbench: Provide more information
          when schema is invalid due to invalid hierarchies
------------------------------------------------------------


